<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.faint.mapper.userMapper">
	<insert id="create">
	insert	into tbl_user
	(email, nickname, password)
	values(#{email},#{nickname},#{password})
	</insert>
	
	<!-- 회원전체목록 -->
	<select id="listAll" resultType="com.faint.domain.UserVO">
	 <![CDATA[
	 select 
	    name, nickname, profilephoto
	 from 
	   tbl_user
	 where id > 0 
	 ]]>
	</select> 
	
	<!-- 회원키워드목록 -->
	<!-- nickname 또는 name이 키워드랑 부분일치하면 검색됨 -->
	<select id="listKeyword" resultType="com.faint.domain.UserVO">
	 <![CDATA[
	 select 
	   name, nickname, profilephoto
	 from 
	   tbl_user
	 where
	 nickname like CONCAT(#{keyword},'%') 
	 or
	 name like CONCAT(#{keyword},'%') 
	 order by id desc, nickname desc
	 limit 0,30
	 ]]>
	</select>
</mapper>
